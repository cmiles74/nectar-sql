# nectar-sql


nectar: A sugary liquid secreted by plants, primarily in their flowers, to attract pollinators like bees, butterflies, and
hummingbirds. It serves as the raw material for honey.

`nectar-sql`: Converts raw sql strings into honey sql. nectar-sql takes a raw sql string, parses it (using [JSqlParser](JSqlParser)) and converts it into [honeysql](https://github.com/seancorfield/honeysql)

nectar-sql is currently a work in progress and, at present, can be expected to handle a wide variety of `SELECT` queries.

## Usage

```clojure
(require '[plooney81.nectar.sql :as nsql])

;; convert a query...
(nsql/ripen
  "SELECT *
     FROM people
    WHERE age > 25
 ORDER BY age DESC")

;; ...to HoneySQL!
{:select   [:*]
 :from     [:people]
 :where    [:> :age 25]
 :order-by [[:age :desc]]}
```

Run the project's tests:

    $ clj -T:build test

Run the project's CI pipeline and build a JAR (this will fail until you edit the tests to pass):

    $ clj -T:build ci

This will produce an updated `pom.xml` file with synchronized dependencies inside the `META-INF`
directory inside `target/classes` and the JAR in `target`. You can update the version (and SCM tag)
information in generated `pom.xml` by updating `build.clj`.

Install it locally (requires the `ci` task be run first):

    $ clojure -T:build install

Deploy it to Clojars -- needs `CLOJARS_USERNAME` and `CLOJARS_PASSWORD` environment
variables (requires the `ci` task be run first):

    $ clojure -T:build deploy

Your library will be deployed to net.clojars.plooney81/nectar-sql on clojars.org by default.

## Support

- Scope:
    - We currently only support `SELECT` functionality
    - We hope to support `INSERT`, `UPDATE`, `DELETE` in the future

- nectar-sql relies heavily on [JSQLParser](JSqlParser)
    - JSQLParser doesn't currently support a few pieces of functionality, like Implicit Casting in Postgres
        - Check out the other things that [JSQLParser doesn't support](jsql-doesnt-support)

----
[honeysql]: https://github.com/seancorfield/honeysql
[JSqlParser]: https://github.com/JSQLParser/JSqlParser
[jsql-doesnt-support]: https://jsqlparser.github.io/JSqlParser/unsupported.html


## License

Copyright Â© 2024 Plooney

_EPLv1.0 is just the default for projects generated by `clj-new`: you are not_
_required to open source this project, nor are you required to use EPLv1.0!_
_Feel free to remove or change the `LICENSE` file and remove or update this_
_section of the `README.md` file!_

Distributed under the Eclipse Public License version 1.0.
